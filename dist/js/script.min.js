$(document).on("submit","#loginForm",function(t){var e=$(this);$.ajax({data:e.serialize(),type:"post",url:"functions.php",success:function(t){"error"===$.trim(t)?($(".login__error").show(),$(".login__error").html("Неверный логин или пароль")):window.location.href="index.php"}}),t.preventDefault()}),$(document).on("submit","#new_group",function(t){var e=$(this);$.ajax({data:e.serialize(),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'><div class='msg'><span class='msg__close'></span></div></div>"),$(".msg-popup").fadeIn(),"success"==$.trim(t)?location.reload():$(".msg").append($.trim(t))}}),t.preventDefault()}),$(document).on("keypress",".login__input",function(t){$(".login__error").hide()}),$(document).on("click",".exit",function(){if(!confirm("Вы уверены, что хотите выйти?"))return!1}),$(document).on("keyup",".search_stud",function(){if(this.value.length>=2||""==this.value){var t=$(".filter:checked").attr("data-filter");void 0==t&&(t=0),$.ajax({type:"post",url:"search.php",data:"value="+this.value+"&filter="+t,success:function(t){$(".table tr:not(:first)").remove(),$(".table tbody").append(t).fadeIn()}})}}),$(document).ready(function(){$(document).on("focus",".block__field",function(){$(this).attr("autocomplete","off")})}),$(document).on("submit","#new_user",function(t){var e=$(this);$.ajax({data:e.serialize(),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'><div class='msg'><span class='msg__close'></span></div></div>"),$(".msg-popup").fadeIn(),"success"==$.trim(t)?(e.find("input[type='text'], input[type='password']").val(""),e.find("input[type='checkbox']").prop("checked",!1),e.find("select").prop("selectedIndex",0),$(".msg").append("Пользователь успешно добавлен!")):$(".msg").append($.trim(t))}}),t.preventDefault()}),$(document).on("submit","#change_pass",function(t){var e=$(this);$.ajax({data:e.serialize(),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'><div class='msg'><span class='msg__close'></span></div></div>"),$(".msg-popup").fadeIn(),"success"==$.trim(t)?(e.find("input[type='text'], input[type='password']").val(""),e.find("input[type='checkbox']").prop("checked",!1),e.find("select").prop("selectedIndex",0),$(".msg").append("Пароль успешно изменён!")):$(".msg").append($.trim(t))}}),t.preventDefault()}),$(document).on("submit","#del_group",function(t){var e=$(this);$.ajax({data:e.serialize(),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'><div class='msg'><span class='msg__close msg__close_refresh'></span></div></div>"),$(".msg-popup").fadeIn(),"success"==$.trim(t)?(e.find("input[type='text'], input[type='password']").val(""),e.find("input[type='checkbox']").prop("checked",!1),e.find("select").prop("selectedIndex",0),$(".msg").append("Группа успешно удалена!")):$(".msg").append($.trim(t))}}),t.preventDefault()}),$(document).on("click",".load_student",function(){document.location.href="download.php"}),$(document).on("submit","#new_student",function(t){var e=$(this);$.ajax({data:"new_stud=1&"+e.serialize(),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'><div class='msg'><span class='msg__close'></span></div></div>"),$(".msg-popup").fadeIn(),$(".msg").append(t),e.find("input[type='text']:not(:disabled)").val(""),e.find("input[type='checkbox']:not(:disabled)").prop("checked",!1),e.find("select:not(:disabled)").prop("selectedIndex",0)}}),t.preventDefault()}),$(document).on("click",".msg__close",function(){$(".msg-popup").fadeOut(),$(this).hasClass("msg__close_refresh")?location.reload():setTimeout("$('.msg-popup').remove()",500)}),$(document).on("click",".del_stud",function(){if(!confirm("Вы уверены, что хотите удалить студента?"))return!1;$(this);$(".msg-popup").fadeOut(),$.ajax({data:"del_stud="+$(this).attr("data-del_stud"),type:"post",url:"functions.php",success:function(t){window.location.href="student.php"}})}),$(document).on("click",".edit_stud",function(){$(".msg-popup").fadeOut(),$(this).addClass("edit_active"),$.ajax({data:"edit_stud="+$(this).attr("data-edit_stud"),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'></div>"),$(".msg-popup").html(t),$(".msg-popup").fadeIn(),$(".block").append("<span class='msg__close msg__close_white'></span>")}})}),$(document).on("change","select[name='priv']",function(){"admin"==this.value?($(".for_curator").hide(),$(".for_curator .block__field").prop("disabled",!0)):($(".for_curator").show(),$(".for_curator .block__field").prop("disabled",!1))}),$(document).on("submit","#form_save",function(t){var e=$(this);$.ajax({data:"edit_stud_save=1&stud_save="+$(".edit_active").attr("data-edit_stud")+"&"+e.serialize(),type:"post",url:"functions.php",success:function(t){window.location.href="student.php"}}),t.preventDefault()}),$(document).on("click",".view_stud",function(){$.ajax({data:"view_stud="+$(this).attr("data-view_stud"),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'></div>"),$(".msg-popup").html(t),$(".msg-popup").fadeIn(),$(".block").append("<span class='msg__close msg__close_white'></span>")}})}),$(document).on("click",".msg-popup",function(t){t.target==this&&($(".msg-popup").fadeOut(),setTimeout("$('.msg-popup').remove()",500))}),$(document).keyup(function(t){27==t.keyCode&&$(".msg-popup").length&&($(".msg-popup").fadeOut(),setTimeout("$('.msg-popup').remove()",500))}),$(document).on("click",".sort_btn, .filter_title",function(t){if($.trim($(".search_stud").val()).length>=2)var e=$.trim($(".search_stud").val());else var e=0;if($(this).attr("for")==$(".filter:checked").attr("id"))return t.preventDefault(),$(".filter:checked").prop("checked",!1),void $.ajax({data:"full=1&search="+e,type:"post",url:"search.php",success:function(t){$(".table tr:not(:first)").remove(),$(".table tbody").append(t)}});var s=$(this).attr("data-sort");$.ajax({data:"sel_id="+s+"&search="+e,type:"post",url:"functions.php",success:function(t){$(".table tr:not(:first)").remove(),$(".table tbody").append(t)}})}),$(document).on("keyup keydown focus","#confpass",function(){if(""==$("#pass").val())return!1;$(this).val()==$("#pass").val()?$(this).css("border-color","#42bd5d"):$(this).css("border-color","#e04646")}),$(document).on("blur","#confpass",function(){$(this).css("border-color","#22283b")}),$(document).on("keyup keydown","#pass",function(){$("#confpass").val("")}),$(document).on("change","#edt_groupid",function(){$("#edt_newgroup").val($(this).val())}),$(document).on("submit","#edt_group",function(t){var e=$(this);$.ajax({data:e.serialize(),type:"post",url:"functions.php",success:function(t){$("body").append("<div class='msg-popup'><div class='msg'><span class='msg__close msg__close_refresh'></span></div></div>"),$(".msg-popup").fadeIn(),$(".msg").append(t)}}),t.preventDefault()});